%h2#summary Party Summary

= render 'summary_party_votes', division: division

%h2#votes
  All
  = members_type(division.australian_house)
  Eligible to Vote

  \- sorted by
  - if sort.nil?
    party
  - elsif sort == "name"
    name
  - elsif sort == "constituency"
    electorate
  - elsif sort == "vote"
    vote
  - else
    - raise

%p
  Includes
  = members_type(division.australian_house)
  who were absent (or abstained) from this vote.

= render "sort_links", sort: sort, division: division

%table.table.table-striped
  %thead
    %tr
      %th Name
      %th= electorate_label(division.australian_house)
      %th Party
      %th Vote
  %tbody
    - members.each do |member|
      %tr{:class => ("rebel" if member.rebel_on_division?(division))}
        %td= link_to member.name_without_title, member_path2(member)
        %td= link_to_if division.australian_house == "representatives", member.electorate, electorate_path(member)
        %td
          = member.party_long2
          - if member.person.on_front_bench?(division.date)
            (front bench)
        %td= member.vote_on_division_without_tell(division)
