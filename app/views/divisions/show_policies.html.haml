= render "header", division: @division

%h2 Related Policies

= render "current_policies_list", division: @division, display: @display

%h3 Make a new connection

- if user_signed_in?
  = simple_form_for @policy_division, url: create_policy_division_path(division_params(@division)), html: {class: 'form-inline policyvote'} do |f|
    %legend.small
      %p Connect this division with relevant policies.
      %p Please read policy definitions and the divisionâ€™s description before altering list.
    - if @policy_division.errors.any?
      .alert.alert-danger= @policy_division.errors.full_messages.to_sentence
    %fieldset
      %label People who are
      - # TODO: Don't display policies already selected
      = f.collection_select :policy_id, Policy.all, "id", "name", {prompt: "Select related policy"}, size: 1, class: "form-control"
      would have
      %label voted
      - select_options = {'Aye (strong)' => 'aye3',
                          'Aye' => 'aye',
                          'No' => 'no',
                          'No (strong)' => 'no3'}
      = f.select :vote, options_for_select(select_options), {prompt: "Select vote"}, size: 1, class: "form-control"
    = f.submit 'Connect policy', class: 'btn btn-primary'
- else
  %p
    = link_to "Login", new_user_session_path, title: "Login to edit policies"
    to edit policy connections.

