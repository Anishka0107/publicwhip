Instructions for doing the prototype searching

Run
  protoindex.py
which will make the files in pwdata/protoindex

These are the two letter files, "ab.txt" which contain lookup information for all the words beginning with ab.  Check them out to see their structure.


Run
  protoidindex.py
which will make the files in pwdata/protoidx

These are of the form "answers2003-11-20-ind.txt" which contains lookup information (byte offsets) into the xml files for each column number.


For now these searches only go back to August.  Subject to getting all the xml files well-formed, we can run it back for years to get a gauge on the size of these files.


To test, run
  protodecode.py
which will search for the word "coastguard" and print all the questions it finds from the list.

This runs in two stages:
  DecodeWord(word)
returns the list of ids from the search.  These can be marked as where they are from (t: for title, a: for answer).  We could add in the word position too, so as to do phrases.

At the moment, this does a regexp on the string of indexes and words.  We could change this to search by binary chop and take the order of magnitude down to logn.


Secondly,
  FetchWrans(id)
returns a string containing the <wrans> for that id.  You get the whole column if you leave off the final number.  We can get to these columns in order 0 time.

These are the two functions that need converting into php to score the result.



