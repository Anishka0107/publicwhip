%tr.headings
  %td House
  %td Date
  %td Subject
  %td= member.name
  %td
    = member.party
    Vote
  %td Role
- if divisions.empty?
  %tr.odd
    %td{:colspan => "7"}= empty_message
- else
  - divisions.each do |division|
    %tr{:class => cycle("even", "odd")}
      %td{:class => division.house}
        = division.australian_house.capitalize
      %td= formatted_date(division.date, true)
      - if division.australian_house == "representatives"
        %td= link_to division.name, "division.php?date=#{division.date}&number=#{division.number}&mpn=#{member.name.gsub(" ", "_")}&mpc=#{member.electorate}&house=#{division.australian_house}"
      - else
        %td= link_to division.name, "division.php?date=#{division.date}&number=#{division.number}&mpn=#{member.name.gsub(" ", "_")}&mpc=Senate&house=#{division.australian_house}"
      %td
        - if member.division_vote(division) && member.division_vote(division).teller?
          = member.division_vote(division).vote
        - elsif division.majority_vote_for(member) == "absent"
          absent
        - elsif division.majority_vote_for(member) == "minority"
          %i minority
        - else
          = division.majority_vote_for(member).capitalize
      %td= division.whip_guess_for(member.party)
      - # TODO: Get this logic out of the view
      %td{:class => (division.role_for(member).include?("teller") ? "teller" : "")}
        - if division.role_for(member) == "absent"
          absent
        - else
          = division.role_for(member).titlecase
