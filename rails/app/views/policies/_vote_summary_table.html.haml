%table.votes
  - if @member
    %caption= link_to 'Why Majority/minority instead of Aye/No?', help_path(anchor: 'ayemajority')
  %tr.headings
    %td House
    %td Date
    %td Subject
    - if @member
      %td= @member.name
    %td.policyvotehead Policy vote
  - @policy.divisions.each do |division|
    - row_class = cycle('even', 'odd')
    - row_class += 'strong' if division.policy_vote(@policy).include? '3'
    %tr{class: row_class}
      %td{class: division.house}= division.australian_house_name
      %td= formatted_date(division.date, true)
      - if @member
        %td
          - # FIXME: Two houses just to be reeeeally sure
          = link_to division.name, division_path(mpn: @member.url_name, mpc: @member.electorate, date: division.date, number: division.number, house: division.australian_house) + "&house=#{division.australian_house}"
        - # FIXME: Rebelteller whut?
        %td.rebelteller= @member.vote_on_division(division)
      - else
        %td
          = link_to division.name, division_path(date: division.date, number: division.number, house: division.australian_house, dmp: @policy.id)
      %td
        = vote_display_in_table(division.policy_vote(@policy), division.aye_majority)
